



<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta http-equiv="x-dns-prefetch-control" content="on">
      <link rel="dns-prefetch" href="//oi-wiki.org">
      <link rel="dns-prefetch" href="//search.oi-wiki.org">
      <link rel="dns-prefetch" href="//api.github.com">
      <link rel="dns-prefetch" href="//www.google-analytics.com">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="WWeiying's Learn-notes">
      
      
        <link rel="canonical" href="https://www.wweiying.top/math/gen-func/symbolic-method/">
      
      
        <meta name="author" content="WWeiying">
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="jp">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../../../favicon.ico">
      <meta name="generator" content="mkdocs-1.2.4, mkdocs-material-4.4.2">
    
    
      
        <title>Symbolic method - WWeiying's Learn-notes</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.6f7cfa25.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../../../assets/javascripts/modernizr.27508f0e.js"></script>
    
    
      
        <style>@font-face{font-family:'Fira Sans';font-style:normal;font-weight:300;src:url(//lib.baomitu.com/fonts/fira-sans/fira-sans-300.eot);src:local('Fira Sans'),local('FiraSans-Normal'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-300.eot?#iefix) format('embedded-opentype'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-300.woff2) format('woff2'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-300.woff) format('woff'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-300.ttf) format('truetype'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-300.svg#FiraSans) format('svg')}@font-face{font-family:'Fira Sans';font-style:normal;font-weight:regular;src:url(//lib.baomitu.com/fonts/fira-sans/fira-sans-regular.eot);src:local('Fira Sans'),local('FiraSans-Normal'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-regular.eot?#iefix) format('embedded-opentype'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-regular.woff2) format('woff2'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-regular.woff) format('woff'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-regular.ttf) format('truetype'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-regular.svg#FiraSans) format('svg')}@font-face{font-family:'Fira Sans';font-style:italic;font-weight:regular;src:url(//lib.baomitu.com/fonts/fira-sans/fira-sans-italic.eot);src:local('Fira Sans'),local('FiraSans-Italic'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-italic.eot?#iefix) format('embedded-opentype'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-italic.woff2) format('woff2'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-italic.woff) format('woff'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-italic.ttf) format('truetype'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-italic.svg#FiraSans) format('svg')}@font-face{font-family:'Fira Sans';font-style:normal;font-weight:700;src:url(//lib.baomitu.com/fonts/fira-sans/fira-sans-700.eot);src:local('Fira Sans'),local('FiraSans-Normal'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-700.eot?#iefix) format('embedded-opentype'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-700.woff2) format('woff2'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-700.woff) format('woff'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-700.ttf) format('truetype'),url(//lib.baomitu.com/fonts/fira-sans/fira-sans-700.svg#FiraSans) format('svg')}@font-face{font-family:'Fira Mono';font-style:normal;font-weight:regular;src:url(//lib.baomitu.com/fonts/fira-mono/fira-mono-regular.eot);src:local('Fira Mono'),local('FiraMono-Normal'),url(//lib.baomitu.com/fonts/fira-mono/fira-mono-regular.eot?#iefix) format('embedded-opentype'),url(//lib.baomitu.com/fonts/fira-mono/fira-mono-regular.woff2) format('woff2'),url(//lib.baomitu.com/fonts/fira-mono/fira-mono-regular.woff) format('woff'),url(//lib.baomitu.com/fonts/fira-mono/fira-mono-regular.ttf) format('truetype'),url(//lib.baomitu.com/fonts/fira-mono/fira-mono-regular.svg#FiraMono) format('svg')}body,input{font-family:"Fira Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Fira Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/vendor/material-icons/iconfont/material-icons.css">
    
      <link rel="manifest" href="../../../manifest.webmanifest">
    
    
      <link rel="stylesheet" href="../../../_static/css/extra.css?v=13">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-124485594-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#_1" tabindex="1" class="md-skip">
        跳转至
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://www.wweiying.top/" title="WWeiying's Learn-notes" class="md-header-nav__button md-logo">
          
            <i class="md-icon">school</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              WWeiying's Learn-notes
            </span>
            <span class="md-header-nav__topic">
              
                Symbolic method
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/WWeiying/Learn-notes/" title="前往 Github 仓库" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    WWeiying/Learn-notes
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../.." class="md-tabs__link">
          简介
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://www.wweiying.top/" title="WWeiying's Learn-notes" class="md-nav__button md-logo">
      
        <i class="md-icon">school</i>
      
    </a>
    WWeiying's Learn-notes
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/WWeiying/Learn-notes/" title="前往 Github 仓库" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    WWeiying/Learn-notes
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      简介
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        简介
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../.." title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../intro/about/" title="关于本项目" class="md-nav__link">
      关于本项目
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../intro/htc/" title="如何参与" class="md-nav__link">
      如何参与
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../intro/format/" title="格式手册" class="md-nav__link">
      格式手册
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../intro/faq/" title="F.A.Q." class="md-nav__link">
      F.A.Q.
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../intro/docker-deploy/" title="用 Docker 部署 OI Wiki" class="md-nav__link">
      用 Docker 部署 OI Wiki
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../intro/mirrors/" title="镜像站列表" class="md-nav__link">
      镜像站列表
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../intro/thanks/" title="致谢" class="md-nav__link">
      致谢
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    无标号体系
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    集合的（不相交）并构造
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    集合的笛卡尔积构造
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequence" class="md-nav__link">
    集合的 Sequence 构造
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiset" class="md-nav__link">
    集合的 Multiset 构造
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#powerset" class="md-nav__link">
    集合的 Powerset 构造
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cycle" class="md-nav__link">
    集合的 Cycle 构造
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    有限制的构造
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    参考文献
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="评论" class="md-nav__link md-nav__link--active">
            评论
          </a>
        </li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/WWeiying/Learn-notes/edit/master/docs/math/gen-func/symbolic-method.md" title="编辑此页" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Symbolic method</h1>
                
                <p>符号化方法（symbolic method）是将组合对象快速转换成生成函数的一种方法，我们将考虑对于集合上定义的特定运算，然后导出其对应的生成函数的运算。</p>
<p>我们称一个组合类（或简称为类）为 <span class="arithmatex"><span class="MathJax_Preview">(\mathcal{A},\lvert \cdot \rvert)</span><script type="math/tex">(\mathcal{A},\lvert \cdot \rvert)</script></span>，其中 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}</span><script type="math/tex">\mathcal{A}</script></span> 为组合对象的集合，函数 <span class="arithmatex"><span class="MathJax_Preview">\lvert \cdot \rvert</span><script type="math/tex">\lvert \cdot \rvert</script></span> 将每一个组合对象映射为一个非负整数，一般称为大小函数。需要注意的是这个非负整数不能是无限大的。例如对于字符集为 <span class="arithmatex"><span class="MathJax_Preview">\lbrace 0,1\rbrace</span><script type="math/tex">\lbrace 0,1\rbrace</script></span> 的字符串，可以将字符串的长度设置为其大小函数；对于树或图可将节点的数量设置为其大小函数，注意这并非绝对，也可能将某些特定节点的大小函数设置为 <span class="arithmatex"><span class="MathJax_Preview">0</span><script type="math/tex">0</script></span> 等。</p>
<p>本文是基于 Analytic Combinatorics 一书第一章的简化。</p>
<h2 id="_1">无标号体系<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>在无标号体系中将使用普通生成函数（OGF）。对于集合 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}</span><script type="math/tex">\mathcal{A}</script></span> 其对应 OGF 记为</p>
<div class="arithmatex">
<div class="MathJax_Preview">
A(z)=\sum_{\alpha\in\mathcal{A}}z^{\lvert \alpha \rvert}=\sum_{n\geq 0}a_nz^n
</div>
<script type="math/tex; mode=display">
A(z)=\sum_{\alpha\in\mathcal{A}}z^{\lvert \alpha \rvert}=\sum_{n\geq 0}a_nz^n
</script>
</div>
<p>我们约定使用同一组的字母表示同一个类对应的生成函数等，例如用 <span class="arithmatex"><span class="MathJax_Preview">a_n</span><script type="math/tex">a_n</script></span> 表示 <span class="arithmatex"><span class="MathJax_Preview">\lbrack z^n\rbrack A(z)</span><script type="math/tex">\lbrack z^n\rbrack A(z)</script></span> 即 <span class="arithmatex"><span class="MathJax_Preview">A(z)</span><script type="math/tex">A(z)</script></span> 中 <span class="arithmatex"><span class="MathJax_Preview">z^n</span><script type="math/tex">z^n</script></span> 的系数，用 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}_n</span><script type="math/tex">\mathcal{A}_n</script></span> 表示 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}</span><script type="math/tex">\mathcal{A}</script></span> 中大小函数为 <span class="arithmatex"><span class="MathJax_Preview">n</span><script type="math/tex">n</script></span> 的对象的集合（所以 <span class="arithmatex"><span class="MathJax_Preview">a_n=\operatorname{card}(\mathcal{A}_n)</span><script type="math/tex">a_n=\operatorname{card}(\mathcal{A}_n)</script></span> 其中 <span class="arithmatex"><span class="MathJax_Preview">\operatorname{card}</span><script type="math/tex">\operatorname{card}</script></span> 为基数（cardinality））。</p>
<p>本文将不讨论可容许性（admissibility），读者可参考文献中的内容。</p>
<p>下面将引入两种特殊的组合类和组合对象：</p>
<ul>
<li>记 <span class="arithmatex"><span class="MathJax_Preview">\epsilon</span><script type="math/tex">\epsilon</script></span> 为中性对象（neutral object）和 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{E}=\lbrace \epsilon \rbrace</span><script type="math/tex">\mathcal{E}=\lbrace \epsilon \rbrace</script></span> 为中性类（neutral class），中性对象的大小为 <span class="arithmatex"><span class="MathJax_Preview">0</span><script type="math/tex">0</script></span>，中性类的 OGF 为 <span class="arithmatex"><span class="MathJax_Preview">E(z)=1</span><script type="math/tex">E(z)=1</script></span>。</li>
<li>记 <span class="arithmatex"><span class="MathJax_Preview">\circ</span><script type="math/tex">\circ</script></span> 或 <span class="arithmatex"><span class="MathJax_Preview">\bullet</span><script type="math/tex">\bullet</script></span> 为原子对象（atom object）和 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{Z}_{\circ}=\lbrace \circ\rbrace</span><script type="math/tex">\mathcal{Z}_{\circ}=\lbrace \circ\rbrace</script></span> 或 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{Z}_{\bullet}=\lbrace \bullet\rbrace</span><script type="math/tex">\mathcal{Z}_{\bullet}=\lbrace \bullet\rbrace</script></span> 或简写为 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{Z}</span><script type="math/tex">\mathcal{Z}</script></span> 为原子类（atom class），原子对象的大小为 <span class="arithmatex"><span class="MathJax_Preview">1</span><script type="math/tex">1</script></span>，原子类的 OGF 为 <span class="arithmatex"><span class="MathJax_Preview">Z(z)=z</span><script type="math/tex">Z(z)=z</script></span>。</li>
</ul>
<p>对于两个组合类 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}</span><script type="math/tex">\mathcal{A}</script></span> 和 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{B}</span><script type="math/tex">\mathcal{B}</script></span> 在组合意义上同构记为 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}=\mathcal{B}</span><script type="math/tex">\mathcal{A}=\mathcal{B}</script></span> 或 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}\cong\mathcal{B}</span><script type="math/tex">\mathcal{A}\cong\mathcal{B}</script></span>，但仅当该同构不平凡时才使用后者的记号。</p>
<p>我们有</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathcal{A}\cong\mathcal{E}\times \mathcal{A}\cong\mathcal{A}\times\mathcal{E}
</div>
<script type="math/tex; mode=display">
\mathcal{A}\cong\mathcal{E}\times \mathcal{A}\cong\mathcal{A}\times\mathcal{E}
</script>
</div>
<p>其中 <span class="arithmatex"><span class="MathJax_Preview">\times</span><script type="math/tex">\times</script></span> 为二元运算，表示集合的笛卡尔积。</p>
<h3 id="_2">集合的（不相交）并构造<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>对于类 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}</span><script type="math/tex">\mathcal{A}</script></span> 和 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{B}</span><script type="math/tex">\mathcal{B}</script></span> 的并记为</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathcal{A}+\mathcal{B}=(\mathcal{E}_{1}\times\mathcal{A})+(\mathcal{E}_2\times\mathcal{B})
</div>
<script type="math/tex; mode=display">
\mathcal{A}+\mathcal{B}=(\mathcal{E}_{1}\times\mathcal{A})+(\mathcal{E}_2\times\mathcal{B})
</script>
</div>
<p>如此定义可以不违背集合论中集合不相交的要求，我们可以想象成将 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}</span><script type="math/tex">\mathcal{A}</script></span> 中的对象染色成红色，将 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{B}</span><script type="math/tex">\mathcal{B}</script></span> 中的对象染色成蓝色。</p>
<p>对应 OGF 为</p>
<div class="arithmatex">
<div class="MathJax_Preview">
A(z)+B(z)
</div>
<script type="math/tex; mode=display">
A(z)+B(z)
</script>
</div>
<p>考虑</p>
<div class="arithmatex">
<div class="MathJax_Preview">
A(z)+B(z)=\sum _ {\alpha\in\mathcal{A}}z^{\lvert \alpha\rvert} + \sum _ {\beta\in\mathcal{B}}z^{\lvert \beta\rvert}=\sum_{n\geq 0}(a_n+b_n)z^n
</div>
<script type="math/tex; mode=display">
A(z)+B(z)=\sum _ {\alpha\in\mathcal{A}}z^{\lvert \alpha\rvert} + \sum _ {\beta\in\mathcal{B}}z^{\lvert \beta\rvert}=\sum_{n\geq 0}(a_n+b_n)z^n
</script>
</div>
<p>对应形式幂级数的加法。</p>
<h3 id="_3">集合的笛卡尔积构造<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>对于类 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}</span><script type="math/tex">\mathcal{A}</script></span> 和 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{B}</span><script type="math/tex">\mathcal{B}</script></span> 的笛卡尔积记为</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathcal{A}\times \mathcal{B}=\left\lbrace (\alpha, \beta)\mid \alpha \in \mathcal{A},\beta\in\mathcal{B}\right\rbrace
</div>
<script type="math/tex; mode=display">
\mathcal{A}\times \mathcal{B}=\left\lbrace (\alpha, \beta)\mid \alpha \in \mathcal{A},\beta\in\mathcal{B}\right\rbrace
</script>
</div>
<p>对应 OGF 为</p>
<div class="arithmatex">
<div class="MathJax_Preview">
A(z)\cdot B(z)
</div>
<script type="math/tex; mode=display">
A(z)\cdot B(z)
</script>
</div>
<p>我们定义 <span class="arithmatex"><span class="MathJax_Preview">(\alpha,\beta)</span><script type="math/tex">(\alpha,\beta)</script></span> 的大小为其组成部分的大小之和，那么显然也有</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\gamma =(\alpha_1,\alpha_2,\dots ,\alpha_n)\implies \lvert \gamma\rvert =\lvert \alpha_1\rvert +\lvert \alpha_2\rvert +\cdots +\lvert \alpha_n\rvert
</div>
<script type="math/tex; mode=display">
\gamma =(\alpha_1,\alpha_2,\dots ,\alpha_n)\implies \lvert \gamma\rvert =\lvert \alpha_1\rvert +\lvert \alpha_2\rvert +\cdots +\lvert \alpha_n\rvert
</script>
</div>
<p>所以</p>
<div class="arithmatex">
<div class="MathJax_Preview">
A(z)\cdot B(z)=\left(\sum _ {\alpha\in\mathcal{A}}z^{\lvert \alpha\rvert}\right)\left(\sum _ {\beta\in\mathcal{B}}z^{\lvert \beta\rvert}\right)=\sum _ {(\alpha, \beta)\in(\mathcal{A}\times \mathcal{B})}z^{\lvert \alpha\rvert +\lvert \beta\rvert}=\sum_{n\geq 0}\sum_{i+j=n}a_ib_jz^n
</div>
<script type="math/tex; mode=display">
A(z)\cdot B(z)=\left(\sum _ {\alpha\in\mathcal{A}}z^{\lvert \alpha\rvert}\right)\left(\sum _ {\beta\in\mathcal{B}}z^{\lvert \beta\rvert}\right)=\sum _ {(\alpha, \beta)\in(\mathcal{A}\times \mathcal{B})}z^{\lvert \alpha\rvert +\lvert \beta\rvert}=\sum_{n\geq 0}\sum_{i+j=n}a_ib_jz^n
</script>
</div>
<p>对应形式幂级数的乘法。</p>
<h3 id="sequence">集合的 Sequence 构造<a class="headerlink" href="#sequence" title="Permanent link">&para;</a></h3>
<p>Sequence 构造生成了所有可能的组合。</p>
<details class="note" open="open">
<summary>例</summary>
<div class="arithmatex">
<div class="MathJax_Preview">
\begin{aligned}
\operatorname{SEQ}(\lbrace a\rbrace)&amp;=\lbrace \epsilon\rbrace +\lbrace a\rbrace +\lbrace (a,a)\rbrace +\lbrace (a,a,a)\rbrace +\cdots\\
\operatorname{SEQ}(\lbrace a,b\rbrace)&amp;=\lbrace \epsilon\rbrace +\lbrace a,b\rbrace +\lbrace (a,b)\rbrace + \lbrace(b,a)\rbrace +\lbrace (a,a)\rbrace +\lbrace (b,b)\rbrace\\
&amp;+\lbrace (a,b,a)\rbrace +\lbrace (a,b,b)\rbrace +\lbrace (a,a,b)\rbrace\\
&amp;+\lbrace (b,b,a)\rbrace +\lbrace (b,a,b)\rbrace +\lbrace (b,b,b)\rbrace +\lbrace (a,a,a)\rbrace +\lbrace (b,a,a)\rbrace\\
&amp;+\cdots
\end{aligned}
</div>
<script type="math/tex; mode=display">
\begin{aligned}
\operatorname{SEQ}(\lbrace a\rbrace)&=\lbrace \epsilon\rbrace +\lbrace a\rbrace +\lbrace (a,a)\rbrace +\lbrace (a,a,a)\rbrace +\cdots\\
\operatorname{SEQ}(\lbrace a,b\rbrace)&=\lbrace \epsilon\rbrace +\lbrace a,b\rbrace +\lbrace (a,b)\rbrace + \lbrace(b,a)\rbrace +\lbrace (a,a)\rbrace +\lbrace (b,b)\rbrace\\
&+\lbrace (a,b,a)\rbrace +\lbrace (a,b,b)\rbrace +\lbrace (a,a,b)\rbrace\\
&+\lbrace (b,b,a)\rbrace +\lbrace (b,a,b)\rbrace +\lbrace (b,b,b)\rbrace +\lbrace (a,a,a)\rbrace +\lbrace (b,a,a)\rbrace\\
&+\cdots
\end{aligned}
</script>
</div>
<p>可以看到 <span class="arithmatex"><span class="MathJax_Preview">\lbrace (a,b)\rbrace ,\lbrace (b,a)\rbrace</span><script type="math/tex">\lbrace (a,b)\rbrace ,\lbrace (b,a)\rbrace</script></span> 这样组成部分的顺序不同的元素被生成了，可以认为 Sequence 构造生成了有序的组合。</p>
</details>
<p>我们定义</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\operatorname{SEQ}(\mathcal{A})=\mathcal{E}+\mathcal{A}+(\mathcal{A}\times \mathcal{A})+(\mathcal{A}\times \mathcal{A}\times \mathcal{A})+\cdots
</div>
<script type="math/tex; mode=display">
\operatorname{SEQ}(\mathcal{A})=\mathcal{E}+\mathcal{A}+(\mathcal{A}\times \mathcal{A})+(\mathcal{A}\times \mathcal{A}\times \mathcal{A})+\cdots
</script>
</div>
<p>且要求 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}_0=\varnothing</span><script type="math/tex">\mathcal{A}_0=\varnothing</script></span>，也就是 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}</span><script type="math/tex">\mathcal{A}</script></span> 中没有大小为 <span class="arithmatex"><span class="MathJax_Preview">0</span><script type="math/tex">0</script></span> 的对象。</p>
<p>对应 OGF 为</p>
<div class="arithmatex">
<div class="MathJax_Preview">
Q(A(z))=1+A(z)+A(z)^2+A(z)^3+\cdots =\frac{1}{1-A(z)}
</div>
<script type="math/tex; mode=display">
Q(A(z))=1+A(z)+A(z)^2+A(z)^3+\cdots =\frac{1}{1-A(z)}
</script>
</div>
<p>其中 <span class="arithmatex"><span class="MathJax_Preview">Q</span><script type="math/tex">Q</script></span> 为 Pólya 准逆（quasi-inversion）。</p>
<details class="note" open="open">
<summary>例：有序有根树（ordered rooted tree）</summary>
<p>我们可以使用 Sequence 构造来定义有序有根树，即孩子之间的顺序有意义的有根树，设该组合类为 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{T}</span><script type="math/tex">\mathcal{T}</script></span> 那么一棵树为一个根节点和树的 Sequence，即</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathcal{T}=\lbrace \bullet\rbrace\times\operatorname{SEQ}(\mathcal{T})
</div>
<script type="math/tex; mode=display">
\mathcal{T}=\lbrace \bullet\rbrace\times\operatorname{SEQ}(\mathcal{T})
</script>
</div>
<p>对应 OGF 为</p>
<div class="arithmatex">
<div class="MathJax_Preview">
T(z)=\frac{z}{1-T(z)}
</div>
<script type="math/tex; mode=display">
T(z)=\frac{z}{1-T(z)}
</script>
</div>
<p>前几项系数为 <code>0 1 1 2 5 14 42 132 429 1430 4862 16796</code>，忽略常数项即 OEIS <a href="http://oeis.org/A000108">A000108</a>。</p>
</details>
<h3 id="multiset">集合的 Multiset 构造<a class="headerlink" href="#multiset" title="Permanent link">&para;</a></h3>
<p>Multiset 构造生成了所有可能的组合，但不区分组成部分的元素之间的顺序。</p>
<details class="note" open="open">
<summary>例</summary>
<div class="arithmatex">
<div class="MathJax_Preview">
\begin{aligned}
\operatorname{MSET}(\lbrace a\rbrace)&amp;=\lbrace \epsilon\rbrace +\lbrace a\rbrace +\lbrace (a,a)\rbrace +\lbrace (a,a,a)\rbrace +\cdots\\
\operatorname{MSET}(\lbrace a,b\rbrace)&amp;=\lbrace \epsilon\rbrace +\lbrace a\rbrace +\lbrace (a,a)\rbrace +\lbrace (a,a,a)\rbrace +\cdots\\
&amp;+\lbrace b\rbrace +\lbrace (a,b)\rbrace +\lbrace (a,a,b)\rbrace +\cdots \\
&amp;+\lbrace (b,b)\rbrace + \lbrace (a,b,b)\rbrace +\lbrace (a,a,b,b)\rbrace + \cdots\\
&amp;+\cdots
\end{aligned}
</div>
<script type="math/tex; mode=display">
\begin{aligned}
\operatorname{MSET}(\lbrace a\rbrace)&=\lbrace \epsilon\rbrace +\lbrace a\rbrace +\lbrace (a,a)\rbrace +\lbrace (a,a,a)\rbrace +\cdots\\
\operatorname{MSET}(\lbrace a,b\rbrace)&=\lbrace \epsilon\rbrace +\lbrace a\rbrace +\lbrace (a,a)\rbrace +\lbrace (a,a,a)\rbrace +\cdots\\
&+\lbrace b\rbrace +\lbrace (a,b)\rbrace +\lbrace (a,a,b)\rbrace +\cdots \\
&+\lbrace (b,b)\rbrace + \lbrace (a,b,b)\rbrace +\lbrace (a,a,b,b)\rbrace + \cdots\\
&+\cdots
\end{aligned}
</script>
</div>
<p>注意到 <span class="arithmatex"><span class="MathJax_Preview">\lbrace (b,a)\rbrace,\lbrace (a,b,a)\rbrace</span><script type="math/tex">\lbrace (b,a)\rbrace,\lbrace (a,b,a)\rbrace</script></span> 在 <span class="arithmatex"><span class="MathJax_Preview">\operatorname{SEQ}(\lbrace a,b\rbrace)</span><script type="math/tex">\operatorname{SEQ}(\lbrace a,b\rbrace)</script></span> 中出现，但在 <span class="arithmatex"><span class="MathJax_Preview">\operatorname{MSET}(\lbrace a,b\rbrace)</span><script type="math/tex">\operatorname{MSET}(\lbrace a,b\rbrace)</script></span> 没有出现，可以认为 Multiset 生成了无序的组合。</p>
</details>
<p>我们定义其递推式为</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\operatorname{MSET}(\lbrace \alpha_0,\alpha_1,\dots, \alpha_n\rbrace)=\operatorname{MSET}(\lbrace \alpha_0,\alpha_1,\dots, \alpha_{n-1}\rbrace)\times \operatorname{SEQ}(\lbrace \alpha_n\rbrace)
</div>
<script type="math/tex; mode=display">
\operatorname{MSET}(\lbrace \alpha_0,\alpha_1,\dots, \alpha_n\rbrace)=\operatorname{MSET}(\lbrace \alpha_0,\alpha_1,\dots, \alpha_{n-1}\rbrace)\times \operatorname{SEQ}(\lbrace \alpha_n\rbrace)
</script>
</div>
<p>即</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\operatorname{MSET}(\mathcal{A})=\prod _ {\alpha\in\mathcal{A}}\operatorname{SEQ}(\lbrace \alpha\rbrace)
</div>
<script type="math/tex; mode=display">
\operatorname{MSET}(\mathcal{A})=\prod _ {\alpha\in\mathcal{A}}\operatorname{SEQ}(\lbrace \alpha\rbrace)
</script>
</div>
<p>且要求 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}_0=\varnothing</span><script type="math/tex">\mathcal{A}_0=\varnothing</script></span>。或者也可以给出等价的</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\operatorname{MSET}(\mathcal{A})=\operatorname{SEQ}(\mathcal{A})/\mathbf{R}
</div>
<script type="math/tex; mode=display">
\operatorname{MSET}(\mathcal{A})=\operatorname{SEQ}(\mathcal{A})/\mathbf{R}
</script>
</div>
<p>其中 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{R}</span><script type="math/tex">\mathbf{R}</script></span> 为等价关系，我们说 <span class="arithmatex"><span class="MathJax_Preview">(\alpha_1,\dots,\alpha_n)\mathbf{R}(\beta_1,\dots,\beta_n)</span><script type="math/tex">(\alpha_1,\dots,\alpha_n)\mathbf{R}(\beta_1,\dots,\beta_n)</script></span> 当且仅当存在任一置换 <span class="arithmatex"><span class="MathJax_Preview">\sigma</span><script type="math/tex">\sigma</script></span> 对于所有 <span class="arithmatex"><span class="MathJax_Preview">j</span><script type="math/tex">j</script></span> 满足 <span class="arithmatex"><span class="MathJax_Preview">\beta_{j}=\alpha_{\sigma(j)}</span><script type="math/tex">\beta_{j}=\alpha_{\sigma(j)}</script></span>。</p>
<p>对应 OGF 为</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\operatorname{Exp}(A(z))=\prod _ {\alpha \in\mathcal{A}}\left(1-z^{\lvert \alpha \rvert}\right)^{-1}=\prod _ {n\geq 1}\left(1-z^n\right)^{-a_n}
</div>
<script type="math/tex; mode=display">
\operatorname{Exp}(A(z))=\prod _ {\alpha \in\mathcal{A}}\left(1-z^{\lvert \alpha \rvert}\right)^{-1}=\prod _ {n\geq 1}\left(1-z^n\right)^{-a_n}
</script>
</div>
<p>注意到</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\ln(1+z)=\frac{z}{1}-\frac{z^2}{2}+\frac{z^3}{3}-\cdots =\sum_{n\geq 1}\frac{(-1)^{n-1}z^n}{n}
</div>
<script type="math/tex; mode=display">
\ln(1+z)=\frac{z}{1}-\frac{z^2}{2}+\frac{z^3}{3}-\cdots =\sum_{n\geq 1}\frac{(-1)^{n-1}z^n}{n}
</script>
</div>
<p>且 <span class="arithmatex"><span class="MathJax_Preview">A(z)=\exp(\ln(A(z)))</span><script type="math/tex">A(z)=\exp(\ln(A(z)))</script></span> 所以</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\begin{aligned}
\operatorname{Exp}(A(z))&amp;=\exp\left(\sum _ {n\geq 1}-a_n\cdot \ln\left(1-z^n\right)\right)\\
&amp;=\exp\left(\sum _ {n\geq 1}-a_n\cdot \sum _ {m\geq 1}\frac{-z^{nm}}{m}\right)\\
&amp;=\exp\left(\frac{A(z)}{1}+\frac{A(z^2)}{2}+\frac{A(z^3)}{3}+\cdots \right)
\end{aligned}
</div>
<script type="math/tex; mode=display">
\begin{aligned}
\operatorname{Exp}(A(z))&=\exp\left(\sum _ {n\geq 1}-a_n\cdot \ln\left(1-z^n\right)\right)\\
&=\exp\left(\sum _ {n\geq 1}-a_n\cdot \sum _ {m\geq 1}\frac{-z^{nm}}{m}\right)\\
&=\exp\left(\frac{A(z)}{1}+\frac{A(z^2)}{2}+\frac{A(z^3)}{3}+\cdots \right)
\end{aligned}
</script>
</div>
<p>其中 <span class="arithmatex"><span class="MathJax_Preview">\operatorname{Exp}</span><script type="math/tex">\operatorname{Exp}</script></span> 为 Pólya 指数，也被称为 Euler 变换。</p>
<details class="note" open="open">
<summary>例题 <a href="https://loj.ac/p/6268">LOJ 6268. 分拆数</a></summary>
<p><strong>题意</strong>：令 <span class="arithmatex"><span class="MathJax_Preview">f(n)</span><script type="math/tex">f(n)</script></span> 表示将 <span class="arithmatex"><span class="MathJax_Preview">n</span><script type="math/tex">n</script></span> 进行分拆的方案数，求 <span class="arithmatex"><span class="MathJax_Preview">f(1),f(2),\dots,f(10^5)</span><script type="math/tex">f(1),f(2),\dots,f(10^5)</script></span> 对 <span class="arithmatex"><span class="MathJax_Preview">998244353</span><script type="math/tex">998244353</script></span> 取模的值。</p>
<p><strong>解</strong>：设全体正整数类为 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{I}</span><script type="math/tex">\mathcal{I}</script></span>，那么 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{I}=\operatorname{SEQ}_{\geq 1}(\mathcal{Z})=\mathcal{Z}\times \operatorname{SEQ}(\mathcal{Z})</span><script type="math/tex">\mathcal{I}=\operatorname{SEQ}_{\geq 1}(\mathcal{Z})=\mathcal{Z}\times \operatorname{SEQ}(\mathcal{Z})</script></span>（下标 <span class="arithmatex"><span class="MathJax_Preview">\geq 1</span><script type="math/tex">\geq 1</script></span> 为有限制的构造，见后文）。所求即</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\operatorname{MSET}(\mathcal{I})
</div>
<script type="math/tex; mode=display">
\operatorname{MSET}(\mathcal{I})
</script>
</div>
<p>对应 OGF 前几项系数为 <code>1 2 3 5 7 11 15 22 30 42</code>（忽略常数项）即 OEIS <a href="https://oeis.org/A000041">A000041</a>。</p>
</details>
<details class="note" open="open">
<summary>例题 <a href="https://www.luogu.com.cn/problem/P4389">洛谷 P4389 付公主的背包</a></summary>
<p><strong>题意</strong>：给出 <span class="arithmatex"><span class="MathJax_Preview">n</span><script type="math/tex">n</script></span> 种体积分别为 <span class="arithmatex"><span class="MathJax_Preview">v_1,\dots ,v_n</span><script type="math/tex">v_1,\dots ,v_n</script></span> 的商品和正整数 <span class="arithmatex"><span class="MathJax_Preview">m</span><script type="math/tex">m</script></span>，求体积为 <span class="arithmatex"><span class="MathJax_Preview">1,2,\dots,m</span><script type="math/tex">1,2,\dots,m</script></span> 的背包装满的方案数（商品数量不限，有同体积的不同种商品）对 <span class="arithmatex"><span class="MathJax_Preview">998244353</span><script type="math/tex">998244353</script></span> 取模的值。约定 <span class="arithmatex"><span class="MathJax_Preview">1\leq n,m\leq 10^5</span><script type="math/tex">1\leq n,m\leq 10^5</script></span> 且 <span class="arithmatex"><span class="MathJax_Preview">1\leq v_i\leq m</span><script type="math/tex">1\leq v_i\leq m</script></span>。</p>
<p><strong>解</strong>：设商品的组合类为 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}</span><script type="math/tex">\mathcal{A}</script></span>，所求即 <span class="arithmatex"><span class="MathJax_Preview">\operatorname{MSET}(\mathcal{A})</span><script type="math/tex">\operatorname{MSET}(\mathcal{A})</script></span> 对应 OGF 的系数。</p>
</details>
<details class="note" open="open">
<summary>例题 <a href="https://www.luogu.com.cn/problem/P5900">洛谷 P5900 无标号无根树计数</a></summary>
<p><strong>题意</strong>：求出 <span class="arithmatex"><span class="MathJax_Preview">n</span><script type="math/tex">n</script></span> 个节点的无标号无根树的个数对 <span class="arithmatex"><span class="MathJax_Preview">998244353</span><script type="math/tex">998244353</script></span> 取模的值。约定 <span class="arithmatex"><span class="MathJax_Preview">1\leq n\leq 2\times 10^5</span><script type="math/tex">1\leq n\leq 2\times 10^5</script></span>。</p>
<p><strong>解</strong>：设无标号有根树的组合类为 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{T}</span><script type="math/tex">\mathcal{T}</script></span>，那么</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathcal{T}=\lbrace \bullet\rbrace\times\operatorname{MSET}(\mathcal{T})
</div>
<script type="math/tex; mode=display">
\mathcal{T}=\lbrace \bullet\rbrace\times\operatorname{MSET}(\mathcal{T})
</script>
</div>
<p>根据 Richard Otter 的论文 <a href="https://users.math.msu.edu/users/magyarp/Math482/Otter-Trees.pdf">The Number of Trees</a> 中的描述，对应无根树的 OGF 为</p>
<div class="arithmatex">
<div class="MathJax_Preview">
T(z)-\frac{1}{2}T^2(z)+\frac{1}{2}T(z^2)
</div>
<script type="math/tex; mode=display">
T(z)-\frac{1}{2}T^2(z)+\frac{1}{2}T(z^2)
</script>
</div>
<p>前几项系数为 <code>1 1 1 2 3 6 11 23 47 106</code>（忽略常数项）即 OEIS <a href="https://oeis.org/A000055">A000055</a>。</p>
</details>
<h3 id="powerset">集合的 Powerset 构造<a class="headerlink" href="#powerset" title="Permanent link">&para;</a></h3>
<p>Powerset 构造生成了所有子集。</p>
<details class="note" open="open">
<summary>例</summary>
<div class="arithmatex">
<div class="MathJax_Preview">
\begin{aligned}
\operatorname{PSET}(\lbrace a\rbrace)&amp;=\lbrace \epsilon\rbrace +\lbrace a\rbrace \\
\operatorname{PSET}(\lbrace a,b\rbrace)&amp;=\lbrace \epsilon\rbrace +\lbrace a\rbrace +\lbrace b\rbrace +\lbrace (a,b)\rbrace \\
\operatorname{PSET}(\lbrace a,b,c\rbrace)&amp;=\lbrace \epsilon\rbrace +\lbrace a\rbrace +\lbrace b\rbrace +\lbrace (a,b)\rbrace +\lbrace c\rbrace +\lbrace (a,c)\rbrace +\lbrace (b,c)\rbrace +\lbrace (a,b,c)\rbrace\\
\end{aligned}
</div>
<script type="math/tex; mode=display">
\begin{aligned}
\operatorname{PSET}(\lbrace a\rbrace)&=\lbrace \epsilon\rbrace +\lbrace a\rbrace \\
\operatorname{PSET}(\lbrace a,b\rbrace)&=\lbrace \epsilon\rbrace +\lbrace a\rbrace +\lbrace b\rbrace +\lbrace (a,b)\rbrace \\
\operatorname{PSET}(\lbrace a,b,c\rbrace)&=\lbrace \epsilon\rbrace +\lbrace a\rbrace +\lbrace b\rbrace +\lbrace (a,b)\rbrace +\lbrace c\rbrace +\lbrace (a,c)\rbrace +\lbrace (b,c)\rbrace +\lbrace (a,b,c)\rbrace\\
\end{aligned}
</script>
</div>
</details>
<p>我们定义其递推式为</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\operatorname{PSET}(\lbrace \alpha_0,\alpha_1,\dots, \alpha_n\rbrace)=\operatorname{PSET}(\lbrace \alpha_0,\alpha_1,\dots, \alpha_{n-1}\rbrace)\times (\lbrace \epsilon\rbrace +\lbrace \alpha_n\rbrace)
</div>
<script type="math/tex; mode=display">
\operatorname{PSET}(\lbrace \alpha_0,\alpha_1,\dots, \alpha_n\rbrace)=\operatorname{PSET}(\lbrace \alpha_0,\alpha_1,\dots, \alpha_{n-1}\rbrace)\times (\lbrace \epsilon\rbrace +\lbrace \alpha_n\rbrace)
</script>
</div>
<p>即</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\operatorname{PSET}(\mathcal{A})\cong \prod _ {\alpha\in\mathcal{A}}\left(\lbrace \epsilon \rbrace +\lbrace \alpha\rbrace\right)
</div>
<script type="math/tex; mode=display">
\operatorname{PSET}(\mathcal{A})\cong \prod _ {\alpha\in\mathcal{A}}\left(\lbrace \epsilon \rbrace +\lbrace \alpha\rbrace\right)
</script>
</div>
<p>且要求 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}_0=\varnothing</span><script type="math/tex">\mathcal{A}_0=\varnothing</script></span>。</p>
<p>对应 OGF 为</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\begin{aligned}
\overline{\operatorname{Exp}}(A(z))&amp;=\prod _ {\alpha\in\mathcal{A}}\left(1+z^{\lvert \alpha \rvert}\right)=\prod _ {n\geq 1}\left(1+z^n\right)^{a_n}\\
&amp;=\exp\left(\sum _ {n\geq 1}a_n\cdot \ln\left(1+z^n\right)\right)\\
&amp;=\exp\left(\sum _ {n\geq 1}a_n\cdot \sum _ {m\geq 1}\frac{(-1)^{m-1}z^{nm}}{m}\right)\\
&amp;=\exp\left(\frac{A(z)}{1}-\frac{A(z^2)}{2}+\frac{A(z^3)}{3}-\cdots \right)
\end{aligned}
</div>
<script type="math/tex; mode=display">
\begin{aligned}
\overline{\operatorname{Exp}}(A(z))&=\prod _ {\alpha\in\mathcal{A}}\left(1+z^{\lvert \alpha \rvert}\right)=\prod _ {n\geq 1}\left(1+z^n\right)^{a_n}\\
&=\exp\left(\sum _ {n\geq 1}a_n\cdot \ln\left(1+z^n\right)\right)\\
&=\exp\left(\sum _ {n\geq 1}a_n\cdot \sum _ {m\geq 1}\frac{(-1)^{m-1}z^{nm}}{m}\right)\\
&=\exp\left(\frac{A(z)}{1}-\frac{A(z^2)}{2}+\frac{A(z^3)}{3}-\cdots \right)
\end{aligned}
</script>
</div>
<p>其中 <span class="arithmatex"><span class="MathJax_Preview">\overline{\operatorname{Exp}}</span><script type="math/tex">\overline{\operatorname{Exp}}</script></span> 为 Pólya 指数·改。</p>
<p>容易发现 <span class="arithmatex"><span class="MathJax_Preview">\operatorname{PSET}(\mathcal{A})\subset \operatorname{MSET}(\mathcal{A})</span><script type="math/tex">\operatorname{PSET}(\mathcal{A})\subset \operatorname{MSET}(\mathcal{A})</script></span>。</p>
<h3 id="cycle">集合的 Cycle 构造<a class="headerlink" href="#cycle" title="Permanent link">&para;</a></h3>
<p>Cycle 构造生成了所有可能的组合，但不区分仅轮换不同的组合。</p>
<p>我们定义为</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\operatorname{CYC}(\mathcal{A})=\left(\operatorname{SEQ}(\mathcal{A})\setminus\lbrace \epsilon\rbrace\right)/\mathbf{S}
</div>
<script type="math/tex; mode=display">
\operatorname{CYC}(\mathcal{A})=\left(\operatorname{SEQ}(\mathcal{A})\setminus\lbrace \epsilon\rbrace\right)/\mathbf{S}
</script>
</div>
<p>其中 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{S}</span><script type="math/tex">\mathbf{S}</script></span> 为等价关系，我们说 <span class="arithmatex"><span class="MathJax_Preview">(\alpha_1,\dots,\alpha_n)\mathbf{S}(\beta_1,\dots,\beta_n)</span><script type="math/tex">(\alpha_1,\dots,\alpha_n)\mathbf{S}(\beta_1,\dots,\beta_n)</script></span> 当且仅当存在任一循环移位 <span class="arithmatex"><span class="MathJax_Preview">\tau</span><script type="math/tex">\tau</script></span> 对于所有 <span class="arithmatex"><span class="MathJax_Preview">j</span><script type="math/tex">j</script></span> 都满足 <span class="arithmatex"><span class="MathJax_Preview">\beta_j=\alpha_{\tau(j)}</span><script type="math/tex">\beta_j=\alpha_{\tau(j)}</script></span>。</p>
<details class="note" open="open">
<summary>例</summary>
<p>为了简便我们令 <span class="arithmatex"><span class="MathJax_Preview">\texttt{a},\texttt{b}</span><script type="math/tex">\texttt{a},\texttt{b}</script></span> 均为大小为 <span class="arithmatex"><span class="MathJax_Preview">1</span><script type="math/tex">1</script></span> 的字符，这里仅列举大小为 <span class="arithmatex"><span class="MathJax_Preview">3</span><script type="math/tex">3</script></span> 和 <span class="arithmatex"><span class="MathJax_Preview">4</span><script type="math/tex">4</script></span> 的字符串：</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\operatorname{CYC}(\lbrace \texttt{a},\texttt{b}\rbrace)_3=\lbrace \texttt{aaa}\rbrace +\lbrace \texttt{aab}\rbrace+\lbrace \texttt{abb}\rbrace+\lbrace \texttt{bbb}\rbrace
</div>
<script type="math/tex; mode=display">
\operatorname{CYC}(\lbrace \texttt{a},\texttt{b}\rbrace)_3=\lbrace \texttt{aaa}\rbrace +\lbrace \texttt{aab}\rbrace+\lbrace \texttt{abb}\rbrace+\lbrace \texttt{bbb}\rbrace
</script>
</div>
<p>其中 <span class="arithmatex"><span class="MathJax_Preview">\texttt{aab}\mathbf{S}\texttt{baa}\mathbf{S}\texttt{aba}</span><script type="math/tex">\texttt{aab}\mathbf{S}\texttt{baa}\mathbf{S}\texttt{aba}</script></span> 只保留其一，同样的 <span class="arithmatex"><span class="MathJax_Preview">\texttt{abb}\mathbf{S}\texttt{bab}\mathbf{S}\texttt{bba}</span><script type="math/tex">\texttt{abb}\mathbf{S}\texttt{bab}\mathbf{S}\texttt{bba}</script></span> 只保留其一。</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\operatorname{CYC}(\lbrace \texttt{a},\texttt{b}\rbrace)_4=\lbrace \texttt{aaaa}\rbrace +\lbrace \texttt{aaab}\rbrace+\lbrace \texttt{aabb}\rbrace+\lbrace \texttt{abbb}\rbrace+\lbrace \texttt{bbbb}\rbrace +\lbrace \texttt{abab}\rbrace
</div>
<script type="math/tex; mode=display">
\operatorname{CYC}(\lbrace \texttt{a},\texttt{b}\rbrace)_4=\lbrace \texttt{aaaa}\rbrace +\lbrace \texttt{aaab}\rbrace+\lbrace \texttt{aabb}\rbrace+\lbrace \texttt{abbb}\rbrace+\lbrace \texttt{bbbb}\rbrace +\lbrace \texttt{abab}\rbrace
</script>
</div>
<p>其中 <span class="arithmatex"><span class="MathJax_Preview">\texttt{aaab}\mathbf{S}\texttt{baaa}\mathbf{S}\texttt{abaa}\mathbf{S}\texttt{aaba}</span><script type="math/tex">\texttt{aaab}\mathbf{S}\texttt{baaa}\mathbf{S}\texttt{abaa}\mathbf{S}\texttt{aaba}</script></span>，<span class="arithmatex"><span class="MathJax_Preview">\texttt{aabb}\mathbf{S}\texttt{baab}\mathbf{S}\texttt{bbaa}\mathbf{S}\texttt{abba}</span><script type="math/tex">\texttt{aabb}\mathbf{S}\texttt{baab}\mathbf{S}\texttt{bbaa}\mathbf{S}\texttt{abba}</script></span>，<span class="arithmatex"><span class="MathJax_Preview">\texttt{abbb}\mathbf{S}\texttt{babb}\mathbf{S}\texttt{bbab}\mathbf{S}\texttt{bbba}</span><script type="math/tex">\texttt{abbb}\mathbf{S}\texttt{babb}\mathbf{S}\texttt{bbab}\mathbf{S}\texttt{bbba}</script></span> 和 <span class="arithmatex"><span class="MathJax_Preview">\texttt{abab}\mathbf{S}\texttt{baba}</span><script type="math/tex">\texttt{abab}\mathbf{S}\texttt{baba}</script></span>。</p>
</details>
<p>对应 OGF 为</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\operatorname{Log}(A(z))=\sum _ {n\geq 1}\frac{\varphi(n)}{n}\ln\frac{1}{1-A(z^n)}
</div>
<script type="math/tex; mode=display">
\operatorname{Log}(A(z))=\sum _ {n\geq 1}\frac{\varphi(n)}{n}\ln\frac{1}{1-A(z^n)}
</script>
</div>
<p>其中 <span class="arithmatex"><span class="MathJax_Preview">\varphi</span><script type="math/tex">\varphi</script></span> 为 Euler 函数，<span class="arithmatex"><span class="MathJax_Preview">\operatorname{Log}</span><script type="math/tex">\operatorname{Log}</script></span> 为 Pólya 对数。</p>
<p>由于证明较复杂，读者可参考 Flajolet 的论文 <a href="https://epubs.siam.org/doi/10.1137/0404006">The Cycle Construction</a> 或 Analytic Combinatorics 的附录。</p>
<h3 id="_4">有限制的构造<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>对于上述所有构造，我们都没有限制其「组成部分」的个数，若在 <span class="arithmatex"><span class="MathJax_Preview">\operatorname{SEQ}</span><script type="math/tex">\operatorname{SEQ}</script></span> 的下标给一个作用于整数的谓词用于约束其组成部分，如</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\operatorname{SEQ}_{=k}(\mathcal{B}),\quad \operatorname{SEQ}_{\geq k}(\mathcal{B}),\quad \operatorname{SEQ}_{1..k}(\mathcal{B})
</div>
<script type="math/tex; mode=display">
\operatorname{SEQ}_{=k}(\mathcal{B}),\quad \operatorname{SEQ}_{\geq k}(\mathcal{B}),\quad \operatorname{SEQ}_{1..k}(\mathcal{B})
</script>
</div>
<p>其中 <span class="arithmatex"><span class="MathJax_Preview">\operatorname{SEQ}_{=k}(\mathcal{B})</span><script type="math/tex">\operatorname{SEQ}_{=k}(\mathcal{B})</script></span> 也常简写为 <span class="arithmatex"><span class="MathJax_Preview">\operatorname{SEQ}_k(\mathcal{B})</span><script type="math/tex">\operatorname{SEQ}_k(\mathcal{B})</script></span>，<span class="arithmatex"><span class="MathJax_Preview">\operatorname{SEQ}_{1..k}(\mathcal{B})</span><script type="math/tex">\operatorname{SEQ}_{1..k}(\mathcal{B})</script></span> 表示在区间 <span class="arithmatex"><span class="MathJax_Preview">\lbrack 1..k\rbrack</span><script type="math/tex">\lbrack 1..k\rbrack</script></span> 上。</p>
<p>令 <span class="arithmatex"><span class="MathJax_Preview">\mathfrak{K}</span><script type="math/tex">\mathfrak{K}</script></span> 为任意上述 <span class="arithmatex"><span class="MathJax_Preview">\operatorname{SEQ},\operatorname{PSET},\operatorname{MSET},\operatorname{CYC}</span><script type="math/tex">\operatorname{SEQ},\operatorname{PSET},\operatorname{MSET},\operatorname{CYC}</script></span> 之一，以及</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathcal{A}=\mathfrak{K}_k(\mathcal{B})
</div>
<script type="math/tex; mode=display">
\mathcal{A}=\mathfrak{K}_k(\mathcal{B})
</script>
</div>
<p>即我们需要对于 <span class="arithmatex"><span class="MathJax_Preview">\alpha\in\mathcal{A}</span><script type="math/tex">\alpha\in\mathcal{A}</script></span> 有</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\alpha =\lbrace (\beta_1,\beta_2,\dots ,\beta_k)\mid \beta\in\mathcal{B}\rbrace
</div>
<script type="math/tex; mode=display">
\alpha =\lbrace (\beta_1,\beta_2,\dots ,\beta_k)\mid \beta\in\mathcal{B}\rbrace
</script>
</div>
<p>设 <span class="arithmatex"><span class="MathJax_Preview">\chi</span><script type="math/tex">\chi</script></span> 函数作用于组合对象上为其组成部分的个数，也就是要令 <span class="arithmatex"><span class="MathJax_Preview">\chi(\alpha)=k</span><script type="math/tex">\chi(\alpha)=k</script></span>，不妨增加一元来「跟踪」组成部分的个数。</p>
<p>令</p>
<div class="arithmatex">
<div class="MathJax_Preview">
A _ {n,k}=\operatorname{card}\left\lbrace \alpha\in\mathcal{A}\mid \lvert \alpha\rvert =n,\chi(\alpha)=k\right\rbrace
</div>
<script type="math/tex; mode=display">
A _ {n,k}=\operatorname{card}\left\lbrace \alpha\in\mathcal{A}\mid \lvert \alpha\rvert =n,\chi(\alpha)=k\right\rbrace
</script>
</div>
<p>那么</p>
<div class="arithmatex">
<div class="MathJax_Preview">
A(z,u)=\sum _ {n,k}A _ {n,k}u^kz^n=\sum _ {\alpha\in\mathcal{A}}z^{\lvert \alpha\rvert}u^{\chi(\alpha)}
</div>
<script type="math/tex; mode=display">
A(z,u)=\sum _ {n,k}A _ {n,k}u^kz^n=\sum _ {\alpha\in\mathcal{A}}z^{\lvert \alpha\rvert}u^{\chi(\alpha)}
</script>
</div>
<p>然后我们只要提取出 <span class="arithmatex"><span class="MathJax_Preview">u^k</span><script type="math/tex">u^k</script></span> 的系数即可获得对应表达式，例如 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}=\operatorname{SEQ}_k(\mathcal{B})</span><script type="math/tex">\mathcal{A}=\operatorname{SEQ}_k(\mathcal{B})</script></span> 可直接导出</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\begin{aligned}
&amp;{}A(z,u)=\sum _ {k\geq 0}u^kB(z)^k=\frac{1}{1-uB(z)}\\
\implies &amp;{}A(z)=B(z)^k
\end{aligned}
</div>
<script type="math/tex; mode=display">
\begin{aligned}
&{}A(z,u)=\sum _ {k\geq 0}u^kB(z)^k=\frac{1}{1-uB(z)}\\
\implies &{}A(z)=B(z)^k
\end{aligned}
</script>
</div>
<p>显然也有</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathcal{A}=\operatorname{SEQ}_{\geq k}(\mathcal{B})\implies A(z)=\frac{B(z)^k}{1-B(z)}
</div>
<script type="math/tex; mode=display">
\mathcal{A}=\operatorname{SEQ}_{\geq k}(\mathcal{B})\implies A(z)=\frac{B(z)^k}{1-B(z)}
</script>
</div>
<p>而对于 <span class="arithmatex"><span class="MathJax_Preview">\operatorname{MSET} _ k(\mathcal{B})</span><script type="math/tex">\operatorname{MSET} _ k(\mathcal{B})</script></span> 和 <span class="arithmatex"><span class="MathJax_Preview">\operatorname{PSET} _ k(\mathcal{B})</span><script type="math/tex">\operatorname{PSET} _ k(\mathcal{B})</script></span> 已经有</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\begin{aligned}
&amp;{}A(z,u)=\prod_n\left(1-uz^n\right)^{-b_n}\\
\implies &amp;{}A(z)=\lbrack u^k\rbrack \exp\left(\frac{u}{1}B(z)+\frac{u^2}{2}B(z^2)+\frac{u^3}{3}B(z^3)+\cdots\right)
\end{aligned}
</div>
<script type="math/tex; mode=display">
\begin{aligned}
&{}A(z,u)=\prod_n\left(1-uz^n\right)^{-b_n}\\
\implies &{}A(z)=\lbrack u^k\rbrack \exp\left(\frac{u}{1}B(z)+\frac{u^2}{2}B(z^2)+\frac{u^3}{3}B(z^3)+\cdots\right)
\end{aligned}
</script>
</div>
<p>和</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\begin{aligned}
&amp;{}A(z,u)=\prod_n\left(1+uz^n\right)^{b_n}\\
\implies &amp;{}A(z)=\lbrack u^k\rbrack \exp\left(\frac{u}{1}B(z)-\frac{u^2}{2}B(z^2)+\frac{u^3}{3}B(z^3)-\cdots\right)
\end{aligned}
</div>
<script type="math/tex; mode=display">
\begin{aligned}
&{}A(z,u)=\prod_n\left(1+uz^n\right)^{b_n}\\
\implies &{}A(z)=\lbrack u^k\rbrack \exp\left(\frac{u}{1}B(z)-\frac{u^2}{2}B(z^2)+\frac{u^3}{3}B(z^3)-\cdots\right)
\end{aligned}
</script>
</div>
<p>对于 <span class="arithmatex"><span class="MathJax_Preview">\operatorname{CYC}_k(\mathcal{B})</span><script type="math/tex">\operatorname{CYC}_k(\mathcal{B})</script></span> 同理。</p>
<details class="note">
<summary>使用上式计算 <span class="arithmatex"><span class="MathJax_Preview">\operatorname{MSET}_3(\mathcal{B})</span><script type="math/tex">\operatorname{MSET}_3(\mathcal{B})</script></span> 和 <span class="arithmatex"><span class="MathJax_Preview">\operatorname{MSET}_4(\mathcal{B})</span><script type="math/tex">\operatorname{MSET}_4(\mathcal{B})</script></span> 对应 OGF</summary>
<p>尝试计算 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}=\operatorname{MSET}_3(\mathcal{B})</span><script type="math/tex">\mathcal{A}=\operatorname{MSET}_3(\mathcal{B})</script></span> 为</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\begin{aligned}
\lbrack u^3\rbrack A(z,u)&amp;= \frac{1}{0!}\left(\lbrack u^3\rbrack 1\right)+\frac{1}{1!}\left(\lbrack u^3\rbrack \left(\frac{u}{1}B(z)+\frac{u^2}{2}B(z^2)+\frac{u^3}{3}B(z^3)+\cdots \right)\right)\\
&amp;+\frac{1}{2!}\left(\lbrack u^3\rbrack \left(\frac{u}{1}B(z)+\frac{u^2}{2}B(z^2)+\cdots \right)^2\right)\\
&amp;+\frac{1}{3!}\left(\lbrack u^3\rbrack \left(\frac{u}{1}B(z)+\cdots \right)^3\right)\\
&amp;=\frac{B(z)^3}{6}+\frac{B(z)B(z^2)}{2}+\frac{B(z)^3}{3}
\end{aligned}
</div>
<script type="math/tex; mode=display">
\begin{aligned}
\lbrack u^3\rbrack A(z,u)&= \frac{1}{0!}\left(\lbrack u^3\rbrack 1\right)+\frac{1}{1!}\left(\lbrack u^3\rbrack \left(\frac{u}{1}B(z)+\frac{u^2}{2}B(z^2)+\frac{u^3}{3}B(z^3)+\cdots \right)\right)\\
&+\frac{1}{2!}\left(\lbrack u^3\rbrack \left(\frac{u}{1}B(z)+\frac{u^2}{2}B(z^2)+\cdots \right)^2\right)\\
&+\frac{1}{3!}\left(\lbrack u^3\rbrack \left(\frac{u}{1}B(z)+\cdots \right)^3\right)\\
&=\frac{B(z)^3}{6}+\frac{B(z)B(z^2)}{2}+\frac{B(z)^3}{3}
\end{aligned}
</script>
</div>
<p>尝试计算 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}=\operatorname{MSET}_4(\mathcal{B})</span><script type="math/tex">\mathcal{A}=\operatorname{MSET}_4(\mathcal{B})</script></span> 为</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\begin{aligned}
\lbrack u^4\rbrack A(z,u)&amp;= \frac{1}{0!}\left(\lbrack u^4\rbrack 1\right)+\frac{1}{1!}\left(\lbrack u^4\rbrack \left(\frac{u}{1}B(z)+\frac{u^2}{2}B(z^2)+\frac{u^3}{3}B(z^3)+\frac{u^4}{4}B(z^4)+\cdots \right)\right)\\
&amp;+\frac{1}{2!}\left(\lbrack u^4\rbrack \left(\frac{u}{1}B(z)+\frac{u^2}{2}B(z^2)+\frac{u^3}{3}B(z^3)+\cdots \right)^2\right)\\
&amp;+\frac{1}{3!}\left(\lbrack u^4\rbrack \left(\frac{u}{1}B(z)+\frac{u^2}{2}B(z^2)+\cdots \right)^3\right)\\
&amp;+\frac{1}{4!}\left(\lbrack u^4\rbrack \left(\frac{u}{1}B(z)+\cdots \right)^4\right)\\
&amp;=\frac{B(z^4)}{4}+\frac{1}{2!}\left(\frac{B(z^2)^2}{4}+\frac{2B(z)B(z^3)}{3}\right)+\frac{1}{3!}\left(\frac{3B(z)^2B(z^2)}{2}\right)+\frac{B(z)^4}{4!}\\
&amp;=\frac{B(z)^4}{24}+\frac{B(z)^2B(z^2)}{4}+\frac{B(z)B(z^3)}{3}+\frac{B(z^2)^2}{8}+\frac{B(z^4)}{4}
\end{aligned}
</div>
<script type="math/tex; mode=display">
\begin{aligned}
\lbrack u^4\rbrack A(z,u)&= \frac{1}{0!}\left(\lbrack u^4\rbrack 1\right)+\frac{1}{1!}\left(\lbrack u^4\rbrack \left(\frac{u}{1}B(z)+\frac{u^2}{2}B(z^2)+\frac{u^3}{3}B(z^3)+\frac{u^4}{4}B(z^4)+\cdots \right)\right)\\
&+\frac{1}{2!}\left(\lbrack u^4\rbrack \left(\frac{u}{1}B(z)+\frac{u^2}{2}B(z^2)+\frac{u^3}{3}B(z^3)+\cdots \right)^2\right)\\
&+\frac{1}{3!}\left(\lbrack u^4\rbrack \left(\frac{u}{1}B(z)+\frac{u^2}{2}B(z^2)+\cdots \right)^3\right)\\
&+\frac{1}{4!}\left(\lbrack u^4\rbrack \left(\frac{u}{1}B(z)+\cdots \right)^4\right)\\
&=\frac{B(z^4)}{4}+\frac{1}{2!}\left(\frac{B(z^2)^2}{4}+\frac{2B(z)B(z^3)}{3}\right)+\frac{1}{3!}\left(\frac{3B(z)^2B(z^2)}{2}\right)+\frac{B(z)^4}{4!}\\
&=\frac{B(z)^4}{24}+\frac{B(z)^2B(z^2)}{4}+\frac{B(z)B(z^3)}{3}+\frac{B(z^2)^2}{8}+\frac{B(z^4)}{4}
\end{aligned}
</script>
</div>
</details>
<p>我们发现 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{A}=\mathfrak{K}_k(\mathcal{B})</span><script type="math/tex">\mathcal{A}=\mathfrak{K}_k(\mathcal{B})</script></span> 中 <span class="arithmatex"><span class="MathJax_Preview">A(z)</span><script type="math/tex">A(z)</script></span> 是关于 <span class="arithmatex"><span class="MathJax_Preview">B(z),B(z^2),\dots ,B(z^k)</span><script type="math/tex">B(z),B(z^2),\dots ,B(z^k)</script></span> 的一个表达式。</p>
<p>需要注意的是对于有限制的构造 <span class="arithmatex"><span class="MathJax_Preview">\mathfrak{K}_k(\mathcal{B})</span><script type="math/tex">\mathfrak{K}_k(\mathcal{B})</script></span> 并没有要求 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{B}_0=\varnothing</span><script type="math/tex">\mathcal{B}_0=\varnothing</script></span>。</p>
<details class="note" open="open">
<summary>常用有限制的构造</summary>
<div class="arithmatex">
<div class="MathJax_Preview">
\begin{aligned}
\operatorname{PSET} _ {2}(\mathcal{A})&amp;:\quad \frac{A(z)^2}{2}-\frac{A(z^2)}{2}\\
\operatorname{MSET} _ {2}(\mathcal{A})&amp;:\quad \frac{A(z)^2}{2}+\frac{A(z^2)}{2}\\
\operatorname{CYC} _ {2}(\mathcal{A})&amp;:\quad \frac{A(z)^2}{2}+\frac{A(z^2)}{2}
\end{aligned}
</div>
<script type="math/tex; mode=display">
\begin{aligned}
\operatorname{PSET} _ {2}(\mathcal{A})&:\quad \frac{A(z)^2}{2}-\frac{A(z^2)}{2}\\
\operatorname{MSET} _ {2}(\mathcal{A})&:\quad \frac{A(z)^2}{2}+\frac{A(z^2)}{2}\\
\operatorname{CYC} _ {2}(\mathcal{A})&:\quad \frac{A(z)^2}{2}+\frac{A(z^2)}{2}
\end{aligned}
</script>
</div>
<div class="arithmatex">
<div class="MathJax_Preview">
\begin{aligned}
\operatorname{PSET} _ {3}(\mathcal{A})&amp;:\quad \frac{A(z)^3}{6}-\frac{A(z)A(z^2)}{2}+\frac{A(z^3)}{3}\\
\operatorname{MSET} _ {3}(\mathcal{A})&amp;:\quad \frac{A(z)^3}{6}+\frac{A(z)A(z^2)}{2}+\frac{A(z^3)}{3}\\
\operatorname{CYC} _ {3}(\mathcal{A})&amp;:\quad \frac{A(z)^3}{3}+\frac{2A(z^3)}{3}\\
\end{aligned}
</div>
<script type="math/tex; mode=display">
\begin{aligned}
\operatorname{PSET} _ {3}(\mathcal{A})&:\quad \frac{A(z)^3}{6}-\frac{A(z)A(z^2)}{2}+\frac{A(z^3)}{3}\\
\operatorname{MSET} _ {3}(\mathcal{A})&:\quad \frac{A(z)^3}{6}+\frac{A(z)A(z^2)}{2}+\frac{A(z^3)}{3}\\
\operatorname{CYC} _ {3}(\mathcal{A})&:\quad \frac{A(z)^3}{3}+\frac{2A(z^3)}{3}\\
\end{aligned}
</script>
</div>
<div class="arithmatex">
<div class="MathJax_Preview">
\begin{aligned}
\operatorname{PSET} _ {4}(\mathcal{A})&amp;:\quad \frac{A(z)^4}{24}-\frac{A(z)^2A(z^2)}{4}+\frac{A(z)A(z^3)}{3}+\frac{A(z^2)^2}{8}-\frac{A(z^4)}{4}\\
\operatorname{MSET} _ {4}(\mathcal{A})&amp;:\quad \frac{A(z)^4}{24}+\frac{A(z)^2A(z^2)}{4}+\frac{A(z)A(z^3)}{3}+\frac{A(z^2)^2}{8}+\frac{A(z^4)}{4}\\
\operatorname{CYC} _ {4}(\mathcal{A})&amp;:\quad \frac{A(z)^4}{4}+\frac{A(z^2)^2}{4}+\frac{A(z^4)}{2}\\
\end{aligned}
</div>
<script type="math/tex; mode=display">
\begin{aligned}
\operatorname{PSET} _ {4}(\mathcal{A})&:\quad \frac{A(z)^4}{24}-\frac{A(z)^2A(z^2)}{4}+\frac{A(z)A(z^3)}{3}+\frac{A(z^2)^2}{8}-\frac{A(z^4)}{4}\\
\operatorname{MSET} _ {4}(\mathcal{A})&:\quad \frac{A(z)^4}{24}+\frac{A(z)^2A(z^2)}{4}+\frac{A(z)A(z^3)}{3}+\frac{A(z^2)^2}{8}+\frac{A(z^4)}{4}\\
\operatorname{CYC} _ {4}(\mathcal{A})&:\quad \frac{A(z)^4}{4}+\frac{A(z^2)^2}{4}+\frac{A(z^4)}{2}\\
\end{aligned}
</script>
</div>
</details>
<p>上面的计算方法虽然有效但比较麻烦，读者可阅读 WolframMathWorld 网站的 <a href="https://mathworld.wolfram.com/PolyaEnumerationTheorem.html">Pólya Enumeration Theorem</a> 和 <a href="https://mathworld.wolfram.com/CycleIndex.html">Cycle Index</a> 等相关资料，后者 Cycle Index 在 OEIS 的生成函数表达式中也经常出现。</p>
<details class="note" open="open">
<summary>例题 <a href="https://loj.ac/p/6538">LOJ 6538. 烷基计数 加强版 加强版</a></summary>
<p><strong>题意</strong>：求出 <span class="arithmatex"><span class="MathJax_Preview">n</span><script type="math/tex">n</script></span> 个节点的有根且根节点度数不超过 <span class="arithmatex"><span class="MathJax_Preview">3</span><script type="math/tex">3</script></span>，其余节点度数不超过 <span class="arithmatex"><span class="MathJax_Preview">4</span><script type="math/tex">4</script></span> 的无序树的个数对 <span class="arithmatex"><span class="MathJax_Preview">998244353</span><script type="math/tex">998244353</script></span> 取模的值。约定 <span class="arithmatex"><span class="MathJax_Preview">1\leq n\leq 10^5</span><script type="math/tex">1\leq n\leq 10^5</script></span>。</p>
<p><strong>解</strong>：设组合类为 <span class="arithmatex"><span class="MathJax_Preview">\mathcal{T}</span><script type="math/tex">\mathcal{T}</script></span> 那么</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathcal{T}=\lbrace \bullet\rbrace\times\operatorname{MSET}_{0,1,2,3}(\mathcal{T})
</div>
<script type="math/tex; mode=display">
\mathcal{T}=\lbrace \bullet\rbrace\times\operatorname{MSET}_{0,1,2,3}(\mathcal{T})
</script>
</div>
<p>或令组合类 <span class="arithmatex"><span class="MathJax_Preview">\hat{\mathcal{T}}=\mathcal{T}+\lbrace \epsilon\rbrace</span><script type="math/tex">\hat{\mathcal{T}}=\mathcal{T}+\lbrace \epsilon\rbrace</script></span> 那么</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\hat{\mathcal{T}}=\lbrace \epsilon\rbrace +\lbrace \bullet\rbrace\times\operatorname{MSET}_{3}(\hat{\mathcal{T}})
</div>
<script type="math/tex; mode=display">
\hat{\mathcal{T}}=\lbrace \epsilon\rbrace +\lbrace \bullet\rbrace\times\operatorname{MSET}_{3}(\hat{\mathcal{T}})
</script>
</div>
<p>可得到相同的结果。</p>
</details>
<h2 id="_5">参考文献<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<ul>
<li>Philippe Flajolet and Robert Sedgewick.<a href="http://algo.inria.fr/flajolet/Publications/books.html">Analytic Combinatorics</a>.</li>
</ul>
                
                  
                
              
              
                 
 
 
<hr><blockquote class="page-copyright">
  <span><i class="md-icon">build</i>本页面最近更新：</span><span class="facts_modified"></span>，<a class="edit_history">更新历史</a><br>
  <span><i class="md-icon">edit</i>发现错误？想一起完善？ <a href="https://github.com/WWeiying/Learn-notes/edit/master/docs/math/gen-func/symbolic-method.md" title="编辑此页" class="page_edit_url">在 GitHub 上编辑此页！</a></span><br>
  <span><i class="md-icon">people</i>本页面贡献者：</span><span class="page_contributors">OI-wiki</span><br>
  <span><i class="md-icon">copyright</i>本页面的全部内容在 <strong><a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC BY-SA 4.0</a> 和 <a href="https://github.com/zTrix/sata-license">SATA</a></strong> 协议之条款下提供，附加条款亦可能应用</span>
</blockquote>


<h2 id="__comments" data-no-instant>评论</h2>
<form id="gitalk-form" onsubmit="return!1" data-no-instant>
<div id="gitalk-container" data-no-instant>
</div>
</form>
<link rel="stylesheet" href="../../../assets/vendor/gitalk/gitalk.css">
<script src="../../../assets/vendor/gitalk/gitalk.min.js"></script>
<script>
  const gitalk = new Gitalk({
    id: 'Symbolic method',
    owner: 'WWeiying',
    repo: 'blogtalk',
    admin: ['WWeiying'],
    clientID: 'd3dc000b2047f49b2bd8',
    clientSecret: 'b20c67ecf9762b0de64976355994ac758d506962',
    distractionFreeMode: false,
    pagerDirection: 'first'
  })
  gitalk.render('gitalk-container')
</script>

              
            </article>
          </div>
        </div>
      </main>
      
        
<script>function scrollFunction(){20<document.body.scrollTop||20<document.documentElement.scrollTop?document.getElementById("myBtn").style.display="block":document.getElementById("myBtn").style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}window.onscroll=function(){scrollFunction()}</script>
<button onclick="topFunction()" id="myBtn" class="data-tip-left" data-tip="回到顶部">
  <svg class="Zi Zi--BackToTop data-tip-left" data-tip="回到顶部" fill="currentColor" viewBox="0 0 24 24" width="24" height="24">
    <path d="M16.036 19.59a1 1 0 0 1-.997.995H9.032a.996.996 0 0 1-.997-.996v-7.005H5.03c-1.1 0-1.36-.633-.578-1.416L11.33 4.29a1.003 1.003 0 0 1 1.412 0l6.878 6.88c.782.78.523 1.415-.58 1.415h-3.004v7.005z"></path>
  </svg>
</button>
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2022 WWeiying
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
        <div id="miitbeian"></div>
      </div>
      
      <span style="float:right" class="build_date_utc"><a href="https://github.com/24OI/OI-wiki">最近更新：, 2022-04-29</a></span>
      <script>
        /* miitbeian */
        if (window.location.hostname == "oi-wiki.com") {
          document.getElementById("miitbeian").innerHTML = `<a href="http://beian.miit.gov.cn/">黑ICP备19005132号-2</a>`;
        }
        /* Easter Egg */
        console.log(`%c OI Wiki %c  %c`,"background:#35495e ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#41b883 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:transparent");
        console.log('少年，恭喜你囍提彩蛋，我们在做一些 OI 相关的有趣的事情，如果您对此感兴趣，欢迎访问 https://join-us.oi-wiki.org');
      </script>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.411a9f9f.js"></script>
      <script>app.initialize({version:"1.2.4",url:{base:"../../.."}}),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js",{scope:"/"}).then(function(e){console.log("PWA Registration succeeded. Scope is "+e.scope)}).catch(function(e){console.log("PWA Registration failed with "+e)})</script>
      
        <script src="../../../_static/js/extra.js?v=16"></script>
      
        <script src="../../../assets/vendor/mathjax/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>